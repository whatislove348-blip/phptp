<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Domain RDAP Inspector</title>
  <style>
    /* Retain the same beautiful design */
    :root{
      --bg: #0b1020;
      --card: rgba(255,255,255,.06);
      --card-2: rgba(255,255,255,.08);
      --text: #e8eefc;
      --muted: #a7b3d4;
      --accent: #7c3aed;
      --accent-2: #06b6d4;
      --ring: #4f46e5;
    }
    body{margin:0;font-family:system-ui;background:radial-gradient(1200px 600px at 20% -10%,rgba(124,58,237,.25),transparent 60%),radial-gradient(800px 800px at 120% 10%,rgba(6,182,212,.18),transparent 60%),linear-gradient(180deg,#070a16,#0b1020);color:var(--text)}
    .container{max-width:1200px;margin:0 auto;padding:28px 16px 80px}
    .title{font-size:clamp(24px,3.6vw,44px);font-weight:800;background:linear-gradient(90deg,#fff,#c7d2fe 40%,#99f6e4);-webkit-background-clip:text;color:transparent}
    .subtitle{color:var(--muted)}
    .search{display:grid;grid-template-columns:1fr auto;gap:10px;background:var(--card);padding:12px;border-radius:16px;margin:22px 0 28px}
    .search input{width:100%;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);color:var(--text);padding:14px;border-radius:12px;font-size:16px}
    .btn{border:0;padding:14px 18px;font-weight:700;border-radius:12px;cursor:pointer;color:white;background:linear-gradient(90deg,var(--accent),var(--accent-2))}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:14px}
    .card{grid-column:span 12;background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:18px;padding:16px}
    @media(min-width:720px){.card.half{grid-column:span 6}}
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px 12px;border-bottom:1px dashed rgba(255,255,255,.08)}
    th{color:#c7d2fe}
    .ring{--p:0;width:120px;height:120px;border-radius:50%;background:conic-gradient(var(--ring) calc(var(--p)*1%),rgba(255,255,255,.08) 0);display:grid;place-items:center;position:relative}
    .ring::after{content:"";position:absolute;inset:8px;background:var(--bg);border-radius:inherit}
    .ring strong{position:absolute;font-size:26px}
    .preview{margin-top:20px;text-align:center}
    .preview iframe{width:100%;height:400px;border:0;border-radius:12px;background:#0e1425}
  </style>
</head>
<body>
  <div class="container">
    <h1 class="title">Domain RDAP Inspector</h1>
    <p class="subtitle">Enter any domain to see registration info, expiry, usage days, remaining days, status, and health score.</p>

    <form class="search" id="searchForm">
      <input id="domainInput" type="text" placeholder="example.com" required>
      <button class="btn" type="submit">Search</button>
    </form>

    <div id="result"></div>

    <div class="preview" id="previewBox" style="display:none;">
      <h3>Live Website Preview</h3>
      <iframe id="previewFrame"></iframe>
    </div>
  </div>

<script>
async function fetchRDAP(domain){
  const url = `https://rdap.org/domain/${encodeURIComponent(domain.trim())}`;
  const res = await fetch(url);
  if(!res.ok) throw new Error('Error fetching domain info');
  return await res.json();
}
function fmtDate(d){return d?new Date(d).toISOString().split('T')[0]:'—';}
function daysBetween(a,b){return Math.round((b-a)/(24*3600*1000));}
function scoreDomain(r){let s=0;if(r.status) s+=25;if(r.secureDNS?.delegationSigned)s+=15;return Math.min(100,s);}
function render(data,domain){
  const created=data.events?.find(e=>e.eventAction.includes('creation'))?.eventDate;
  const expiry=data.events?.find(e=>e.eventAction.includes('expiration'))?.eventDate;
  const used=created?daysBetween(new Date(created),new Date()):'—';
  const left=expiry?daysBetween(new Date(),new Date(expiry)):'—';
  const score=scoreDomain(data);
  document.getElementById('result').innerHTML=`
  <div class='grid'>
    <div class='card half'><h3>Created</h3><p>${fmtDate(created)}</p></div>
    <div class='card half'><h3>Expires</h3><p>${fmtDate(expiry)}</p></div>
    <div class='card half'><h3>Used (days)</h3><p>${used}</p></div>
    <div class='card half'><h3>Left (days)</h3><p>${left}</p></div>
    <div class='card'><h3>Status</h3><p>${(data.status||[]).join(', ')||'—'}</p></div>
    <div class='card'><h3>Score</h3><div class='ring' style='--p:${score}'><strong>${score}</strong></div></div>
  </div>`;
  document.getElementById('previewBox').style.display='block';
  document.getElementById('previewFrame').src=`https://${domain}`;
}

document.getElementById('searchForm').addEventListener('submit',async e=>{
  e.preventDefault();
  const domain=document.getElementById('domainInput').value.trim();
  try{const d=await fetchRDAP(domain);render(d,domain);}catch(err){alert('Failed: '+err.message);}
});
</script>
</body>
</html>
